// Generated by CoffeeScript 1.9.3
(function() {
  angular.module('app').factory('DeviceAccountsPlugin', function($window, $q, $log, PluginUtils) {
    var getAccounts, getEmail, pluginName, pluginTest, service;
    pluginName = 'DeviceAccounts';
    pluginTest = function() {
      return $window.plugins && $window.plugins.DeviceAccounts;
    };
    service = {
      getAccounts: getAccounts,
      getEmail: getEmail
    };
    getAccounts = function() {
      return PluginUtils.onReady(pluginName, pluginTest).then(function() {
        var defer;
        defer = $q.defer();
        $window.plugins.DeviceAccounts.get((function(accounts) {
          return defer.resolve(accounts);
        }), function(error) {
          $log.error('pluginError:' + pluginName, error);
          return defer.reject(error);
        });
        return defer.promise;
      });
    };
    getEmail = function() {
      return PluginUtils.onReady(pluginName, pluginTest).then(function() {
        var defer;
        defer = $q.defer();
        $window.plugins.DeviceAccounts.getEmail((function(email) {
          return defer.resolve(email);
        }), function(error) {
          $log.error('pluginError:' + pluginName, error);
          return defer.reject(error);
        });
        return defer.promise;
      });
    };
    return service;
  });


  /**************************
   *                        *
   *      Browser Mock      *
   *                        *
  #************************
   */

  ionic.Platform.ready(function() {
    if (!(ionic.Platform.isAndroid() || ionic.Platform.isIOS() || ionic.Platform.isIPad())) {
      if (!window.plugins) {
        window.plugins = {};
      }
      if (!window.plugins.DeviceAccounts) {
        return window.plugins.DeviceAccounts = {
          get: function(onSuccess, onFail) {
            return onSuccess([
              {
                type: 'com.google',
                name: 'test@example.com'
              }
            ]);
          },
          getByType: function(type, onSuccess, onFail) {
            return onSuccess([
              {
                type: 'com.google',
                name: 'test@example.com'
              }
            ]);
          },
          getEmails: function(onSuccess, onFail) {
            return onSuccess(['test@example.com']);
          },
          getEmail: function(onSuccess, onFail) {
            return onSuccess('test@example.com');
          }
        };
      }
    }
  });

}).call(this);

//# sourceMappingURL=device-accounts.js.map
